<div class="container">
<div class="row">
  <div class="col s8">
    <div id="room-show">
      <table>
        <tr>
          <th><h2><%= @room.name %></h2></th>
          <th>
            <h5><%= @room.display_current_state %></h5>
            <% if current_user == @room.user && !@room.closed? %>
              <%= button_to "Close this Topic", room_path(@room), class: "btn", method: :put %>
            <% end %>
          </th>
        </tr>
      </table>
    </div>

    <div class="row">
      <div class="col s12">
        <table class="hoverable">
          <thead>
          </thead>
          <tbody>
            <div id="recent-messages">
              <% @messages.each do |message| %>
                <tr>
                  <td class="left-align"><%= message.body %></td>
                </tr>
              <% end %>
            </div>
          </tbody>
        </table>
      </div>

      <div class="col s12">
        <div id="new-message" class="input-field">
          <% if @room.closed? %>
            <h4>This thread has been closed.</h4>
            <h5>No new messages may be posted.</h5>
          <% else %>
            <%= form_for :message, url: messages_path do |f| %>
              <%= f.text_field :body %>
              <%= hidden_field_tag "room_id", @room.id %>
              <%= f.submit "Create message", class: "btn" %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="col s4">
    <div id="choices">
      <h3>Choices:</h3>
      <% @room.choices.each do |choice| %>
        <div class="<%=choice.title%>">
          <% if @room.closed? %>
            <div class="<%=choice.chosen_display%>">
              <h4><%= choice.title %></h4>
            </div>
          <% else %>
            <h4><%= choice.title %></h4>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
  <div id="timer-clock">
    <svg viewbox="0 0 250 250">
      <path id="border" transform="translate(125,125)"/>
      <path id="loader" transform="translate(125,125) scale(.84)"/>
    </svg>
  </div>
</div>
</div>
